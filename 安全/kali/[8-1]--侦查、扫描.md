
# 侦查、扫描

* 侦查
    - httrack
* 扫描
    - nikto
    - vega
    - skipfish
    - w3af
    - arachni
    - owasp-zap

## 侦查

* httrack
```shell 
    httrack http://topspeedsnail.com -O /tmp/topspeedsnail
```

## 扫描

### nikto
```shell 
    配置文件 /etc/nikto.conf
    nikto -list-plugins
        -host
        -port
        -ssl
        -output
        -vhost <域名>
    nikto -update
    nikto -host http://1.1.1.1 -port 8080
    nikto -host host.txt
    nmap -p80 192.168.1.0/24 -oG - |  nikto -host -
    nikto -host 192.168.1.1 -ssl -port 443
    nikto -host 192.168.1.1 -useproxy http://1.1.1.1:8081
```

### vega
* 描述
> JAVA编写的开源Web扫描器  
> 扫描模式  
> 代理模式  
> 爬站、处理表单、注入测试   
> 支持SSL  

* 网址
> 官方（https://subgraph.com/vega/）  
> kali（https://tools.kali.org/web-applications/veg）)

* 功能
1. 自动抓取工具和漏洞扫描程序
1. 一致的用户界面
1. 网站爬虫
1. 截取代理
1. SSL MITM
1. 内容分析
1. 通过强大的Javascript模块API实现可扩展性
1. 可定制的警报
1. 数据库和共享数据模型


* 使用基本流程
1. 先使用代理模式进行手工扫描
1. 手动访问网站内的每一个连接并测试每一个表单
1. 在使用扫描模式对扫描结果进行自动化测试
1. 在使用代理模式进行截断代理


### skipfish
```shell 
    -o 目录
    -I 只检查string的URL
    -X 不检查包含string的URL
    -D 跨站点扫描另外一个域
    -l 每秒最大请求数
    -m 每IP最大并发连接数
    --config 指定配置文件
    skipfish -o test http://1.1.1.1
    skipfish -o test @url.txt
    skipfish -o test -S complet.wl -W a.wl http://1.1.1.1
    1. 身份验证
        skipfish -A user:pass -o test http://1.1.1.1
        skipfish -C "name=val" -o test http://1.1.1.1
```


* w3af
```shell 
    1. 安装
        cd ~
        apt-get update	
        apt-get install -y python-pip w3af
        pip install -upgrade pip
        git clone git@github.com:andresriancho/w3af.git
        cd w3af
        ./w3af_console (./w3af_gui)
        apt-get build-dep python-lxml
        apt-get install libssl-dev
        ./tmp/w3af_dependency_install.sh
    2. 升级
        git pull

    3. console 指令
        help
        profiles/ 
            save test self=contained
```
