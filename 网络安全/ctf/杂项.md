
# 杂项


* 文件操作与隐写
* 图片隐写
* 压缩文件处理
* 流量取证技术

## 文件操作

* 文件类型识别
1. File命令
    1. file myheart

2. winhex

3. 文件头错误/残缺

* 文件分离
1. binwalk 工具
    1. 分析文件: binwalk filename
    2. 分离文件: binwalk -e filename
     
2. foremost
    1. foremost pic.jpg -o pic

3. dd
    1. 格式: dd if=源文件 of=输出文件名 bs=文件以几个字节分块 count=跳过第几块 skip=开始分
    
4. winhex
    
5. 010Editor

* 文件合并
1. linux
    1. cat 文件1 文件2  > 文件
    2. 检测完整性: md5sum sim.jpg
2. window
    1. copy /B 文件1+文件2+文件3  文件
    2. certutil -hashfile 文件名 md5 
    

## 图片隐写
* 细微的颜色差别
* gif图多帧隐藏
    - 颜色通道隐藏
    - 不同帧图信息隐藏
    - 不停帧对比隐藏
* exif信息隐藏
* 图片修复
    - 图片头修复
    - 图片尾修复
    - crc校验修复
    - 长、宽、高修复
* 最低有效位LSB隐写
* 图片加密

1. firework 工具

2. exif 工具

3. stegsolve

4. 图片隐写 LSB(隐藏最低有效位)
    1. stegsolve
    2. zsteg
        1. zsteg pic.png
    3. webstego4(针对bmp/pdf)
    4. python脚本
```python
#coding:utf-8
import PIL.Image
def foo():
    im = PIL.Image.open('01.bmp')
    im2 = im.copy()
    pix = im2.load()
    width,heght = im2.size
    
    for x in xrange(0, width):
        for y in xrange(0,height):
            if pix[x,y]&0x1 == 0:
                pix[x,y] = 0
            else:
            pix[x,y] = 255
    im2.show()
    pass

if __name__ == '__main__':
    foo()
    print 'ok.'
    pass
```

5. tweakpng
    1. crc出错
    2. 长、宽出错，导致crc不一致
```python
import os
import binascii
import struct
crcbp = open("2.png","rb").read()
for i in range(1024):
    for j in range(1024):
        data = crcbp[12.16] + struct.pack('>i',i)+ struct.pack('>i',j)+ crcbp[24:29]
        crc32 = binascii.crc32(data) & 0xffffffff
        if crc32 == 0xcbd6df8a:
            printf i,j
            printf "hex",hex(i),hex(j)
```

6. Bftools(解密图片信息)
    1. bftools.exe decode braincopter 图片名 -output 输出文件名
    2. bftools.exe run 上一步输出的文件
    
7. silenteye

8. jpg图像加密
    1. stegdetect
        1. stegdetect -s 敏感度 pic.jpg
     
    2. jphide
     
    3. outguess
        1. 该工具需要编译: ./configure && make && make install
        2. outguess -r 源文件名 输出文件名
    4. F5(stegdetect 识别出来是f5的文件)
        1.  java extract 文件名 -p 密码
    
    5. 二维码处理
        1. CQR
        

